{"version":3,"sources":["../../src/fixer/textlint-fixer.js"],"names":[],"mappings":";;;;;;;;;;;;kBAAoB,IAAI;;IAAZ,EAAE;;;;;AAKd,SAAS,eAAe,CAAC,MAAM,EAAE;AAC7B,QAAM,cAAc,GAAG,MAAM,CAAC,QAAQ,CAAC;AACvC,QAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAC7B,MAAE,CAAC,aAAa,CAAC,cAAc,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;CACrD;AACD,SAAS,cAAc,CAAC,OAAO,EAAE;AAC7B,QAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,QAAQ,KAAK,CAAC,EAAE;AACzC,eAAO,OAAO,CAAC;KAClB,MAAM;AACH,eAAO,SAAS,CAAC;KACpB;CACJ;AACD,SAAS,MAAM,CAAC,OAAO,EAAE;;AAErB,QAAI,MAAM,GAAG,EAAE,CAAC;AAChB,QAAI,KAAK,GAAG,CAAC,CAAC;;AAEd,WAAO,CAAC,OAAO,CAAC,UAAA,MAAM,EAAI;;AAEtB,YAAM,QAAQ,GAAG,MAAM,CAAC,gBAAgB,CAAC;AACzC,aAAK,IAAI,QAAQ,CAAC,MAAM,CAAC;;AAEzB,gBAAQ,CAAC,OAAO,CAAC,UAAA,OAAO,EAAI;AACxB,kBAAM,IAAI,SAAS,CAAC;AACpB,kBAAM,IAAO,MAAM,CAAC,QAAQ,OAAI,CAAC;AACjC,kBAAM,eAAY,OAAO,CAAC,IAAI,IAAI,CAAC,CAAA,AAAE,CAAC;AACtC,kBAAM,gBAAa,OAAO,CAAC,MAAM,IAAI,CAAC,CAAA,AAAE,CAAC;AACzC,kBAAM,WAAS,cAAc,CAAC,OAAO,CAAC,AAAE,CAAC;AACzC,kBAAM,YAAU,OAAO,CAAC,OAAO,AAAE,CAAC;AAClC,kBAAM,IAAI,OAAO,CAAC,MAAM,UAAQ,OAAO,CAAC,MAAM,SAAM,EAAE,CAAC;AACvD,kBAAM,IAAI,IAAI,CAAC;SAElB,CAAC,CAAC;KAEN,CAAC,CAAC;;AAEH,QAAI,KAAK,GAAG,CAAC,EAAE;AACX,cAAM,KAAO,KAAK,KAAK,CAAC,CAAA,UAAK,KAAK,iBAAW,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAA,AAAE,CAAC;KACzE;;AAED,WAAO,MAAM,CAAC;CACjB;;IACoB,aAAa;;;;;;AAKnB,aALM,aAAa,CAKlB,OAAO,EAAE;8BALJ,aAAa;;AAM1B,YAAI,CAAC,OAAO,GAAG,OAAO,CAAC;KAC1B;;iBAPgB,aAAa;;eASjB,yBAAG;AACZ,mBAAO,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC/B;;;eAEI,iBAAG;AACJ,gBAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;AACtC,mBAAO,IAAI,CAAC;SACf;;;WAhBgB,aAAa;;;qBAAb,aAAa","file":"textlint-fixer.js","sourcesContent":["import * as fs from \"fs\";\n\n/**\n * @param {TextLintResult} result\n */\nfunction overWriteResult(result) {\n    const targetFilePath = result.filePath;\n    const output = result.output;\n    fs.writeFileSync(targetFilePath, output, \"utf-8\");\n}\nfunction getMessageType(message) {\n    if (message.fatal || message.severity === 2) {\n        return \"Error\";\n    } else {\n        return \"Warning\";\n    }\n}\nfunction format(results) {\n\n    let output = \"\";\n    let total = 0;\n\n    results.forEach(result => {\n\n        const messages = result.applyingMessages;\n        total += messages.length;\n\n        messages.forEach(message => {\n            output += \"Fixedâœ” \";\n            output += `${result.filePath}: `;\n            output += `line ${message.line || 0}`;\n            output += `, col ${message.column || 0}`;\n            output += `, ${getMessageType(message)}`;\n            output += ` - ${message.message}`;\n            output += message.ruleId ? ` (${message.ruleId})` : \"\";\n            output += \"\\n\";\n\n        });\n\n    });\n\n    if (total > 0) {\n        output += `${total !== 1}\\n${total} problem${total !== 1 ? \"s\" : \"\"}`;\n    }\n\n    return output;\n}\nexport default class TextLintFixer {\n    /**\n     *\n     * @param {TextLintResult[]}results\n     */\n    constructor(results) {\n        this.results = results;\n    }\n\n    formatResults() {\n        return format(this.results);\n    }\n\n    write() {\n        this.results.forEach(overWriteResult);\n        return true;\n    }\n}"]}